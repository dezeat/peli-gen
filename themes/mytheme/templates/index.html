{# Homepage layout: hero, recent posts, project preview, links to About/Contact, footer #}
{% extends "base.html" %}

{% block content %}
  <section class="home-hero">
    <div class="hero-inner">
      <div class="hero-media">
        <img src="/images/logos/hero-graphic.jpg" alt="hero graphic" class="hero-graphic">
        
        <div class="hero-content">
          <h1 class="hero-title">
            Writing, Building,<br>
            and Learning.
          </h1>
          <p class="hero-sub">
            A blog for technical notes, career growth, and reflecting on how to build better data- & software systems.
          </p>
          <p class="hero-cta">
            <a class="btn" href="{{ SITEURL }}/blog.html">Read the blog</a>
            <a class="btn btn-ghost" href="{{ SITEURL }}/projects.html">See projects</a>
          </p>
        </div>
      </div>
    </div>
  </section>

  {# --- RECENT POSTS SECTION (Strictly Blog Posts) --- #}
  <section class="container recent-section">
    <div class="section-header">
      <h2>Recent posts</h2>
      <div class="carousel-nav" data-carousel="posts-carousel">
        <button class="carousel-btn prev" aria-label="Previous posts">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="15 18 9 12 15 6"></polyline>
          </svg>
        </button>
        <button class="carousel-btn next" aria-label="Next posts">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="9 18 15 12 9 6"></polyline>
          </svg>
        </button>
      </div>
    </div>
    <div class="carousel-wrapper">
      <div class="carousel" id="posts-carousel" tabindex="0">
        
        {# COUNTER LOGIC: Show max 5 items that are NOT projects #}
        {% set shown_posts = 0 %}
        {% for article in articles %}
          {# Check if type is NOT project #}
          {% if article.metadata.get('type', 'blog')|lower != 'project' and shown_posts < 5 %}
          
            <article class="card carousel-item">
              {% if article.metadata is defined and article.metadata.get('thumbnail') %}
              <a href="{{ SITEURL }}{{ article.url }}" style="display: block;">
                <img src="{{ article.metadata.get('thumbnail') }}" alt="{{ article.title }}" class="card-thumb">
              </a>
              {% endif %}
              
              <div class="card-content">
                <h3><a href="{{ SITEURL }}{{ article.url }}">{{ article.title }}</a></h3>
                <p class="muted">
                    {{ article.date.strftime('%a %d %b %Y') }} — {{ article.category }}
                </p>
                <p class="summary">{{ article.summary|truncate(100, True, '...') }}</p>
              </div>
            </article>
            
            {% set shown_posts = shown_posts + 1 %}
          {% endif %}
        {% endfor %}
        
      </div>
      <div class="carousel-fade carousel-fade-left"></div>
      <div class="carousel-fade carousel-fade-right"></div>
    </div>
  </section>

  {# --- FEATURED PROJECTS SECTION (Strictly Projects) --- #}
  <section class="container projects-preview">
    <div class="section-header">
      <h2>Featured projects</h2>
      <div class="carousel-nav" data-carousel="projects-carousel">
        <button class="carousel-btn prev" aria-label="Previous projects">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="15 18 9 12 15 6"></polyline>
          </svg>
        </button>
        <button class="carousel-btn next" aria-label="Next projects">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="9 18 15 12 9 6"></polyline>
          </svg>
        </button>
      </div>
    </div>
    <div class="carousel-wrapper">
      <div class="carousel" id="projects-carousel" tabindex="0">
        
        {# COUNTER LOGIC: Show max 5 items that ARE projects #}
        {% set shown_projects = 0 %}
        {% for a in articles %}
          {# Check if type IS project #}
          {% if a.metadata is defined and a.metadata.get('type','')|lower == 'project' and shown_projects < 5 %}
        
            <article class="card carousel-item">
                {% if a.metadata.get('thumbnail') %}
                <a href="{{ SITEURL }}{{ a.url }}" style="display: block;">
                  <img src="{{ a.metadata.get('thumbnail') }}" alt="{{ a.title }}" class="card-thumb">
                </a>
              {% endif %}
              
              <div class="card-content">
                <h3><a href="{{ SITEURL }}{{ a.url }}">{{ a.title }}</a></h3>
                <p class="muted">
                    {{ a.date.strftime('%a %d %b %Y') }} — Projects
                </p>
                <p class="summary">{{ a.summary|truncate(100, True, '...') }}</p>
              </div>
            </article>
        
            {% set shown_projects = shown_projects + 1 %}
          {% endif %}
        {% endfor %}
        
      </div>
      <div class="carousel-fade carousel-fade-left"></div>
      <div class="carousel-fade carousel-fade-right"></div>
    </div>
  </section>

  {# Contact Section #}
<section class="contact-section">
  <div class="container contact-inner">
    <h2>Let's Connect</h2>
    <!-- Social icons removed as requested -->
    <p class="contact-description">
      I write about code and professional growth in tech. 
      I'm always open to discussing new opportunities, collaborations, or answering questions about my posts.
    </p>
    <a class="btn btn-primary" href="mailto:your-email@example.com">Send me a message</a>
  </div>
</section>

  <script src="{{ SITEURL }}/theme/js/carousel.js"></script>
{% endblock %}