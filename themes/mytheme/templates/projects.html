{# Projects page layout: features the most recent project in a large hero banner, and lists the rest in a grid. #}
{% extends "base.html" %}

{% block content %}
<section class="container projects-page-section">
    <h1 class="page-title">Projects</h1>
    <p class="page-subtitle">A curated collection of my work, experiments, and open-source contributions.</p>

    {% set featured_project_shown = false %}

    <div class="projects-featured-hero">
    {% for a in articles | selectattr('metadata.type', 'equalto', 'project') | list if not featured_project_shown %}
        {% if loop.first %}
        <a href="{{ SITEURL }}{{ a.url }}" class="project-hero-card">
            <div class="hero-card-media">
                {% if a.metadata.get('image') %}
                <img src="{{ a.metadata.get('image') }}" alt="{{ a.title }} hero image">
                {% endif %}
            </div>
            <div class="hero-card-content">
                <span class="tag">Featured Project</span>
                <h2>{{ a.title }}</h2>
                <p>{{ a.summary|striptags|truncate(200) }}</p>
                <span class="btn">View Project Details →</span>
            </div>
        </a>
        {% set featured_project_shown = true %}
        {% endif %}
    {% endfor %}
    </div>

    <div class="projects-grid">
        {% for a in articles | selectattr('metadata.type', 'equalto', 'project') | list %}
            {% if loop.index0 > 0 %}
            
            <a href="{{ SITEURL }}{{ a.url }}" class="project-card">
                {% if a.metadata.get('image') %}
                <img src="{{ a.metadata.get('image') }}" alt="{{ a.title }}">
                {% endif %}
                
                <div class="project-content">
                    <h3>{{ a.title }}</h3>
                    <p>{{ a.summary }}</p>
                    <span class="read-more">View Project →</span>
                </div>
            </a>

            {% endif %}
        {% endfor %}
    </div>
</section>
{% endblock %}